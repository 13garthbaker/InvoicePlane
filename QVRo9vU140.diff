From bac1f35b8534e641780d9966087588cea6f06fa4 Mon Sep 17 00:00:00 2001
From: Kovah <mail@kovah.de>
Date: Wed, 8 Feb 2017 14:41:31 +0100
Subject: [PATCH] Fixes setup controller to fill the database_empty.php file
 correctly

---
 application/modules/setup/controllers/Setup.php | 8 ++++----
 1 file changed, 4 insertions(+), 4 deletions(-)

diff --git a/application/modules/setup/controllers/Setup.php b/application/modules/setup/controllers/Setup.php
index 0f5d90e..90383eb 100755
--- a/application/modules/setup/controllers/Setup.php
+++ b/application/modules/setup/controllers/Setup.php
@@ -359,10 +359,10 @@ class Setup extends MX_Controller
     {
         $db_file = file_get_contents(APPPATH . 'config/database_empty.php');
 
-        $db_file = str_replace('$db[\'default\'][\'hostname\'] = \'\'', '$db[\'default\'][\'hostname\'] = \'' . addcslashes($hostname, '\'\\') . '\'', $db_file);
-        $db_file = str_replace('$db[\'default\'][\'username\'] = \'\'', '$db[\'default\'][\'username\'] = \'' . addcslashes($username, '\'\\') . '\'', $db_file);
-        $db_file = str_replace('$db[\'default\'][\'password\'] = \'\'', '$db[\'default\'][\'password\'] = \'' . addcslashes($password, '\'\\') . '\'', $db_file);
-        $db_file = str_replace('$db[\'default\'][\'database\'] = \'\'', '$db[\'default\'][\'database\'] = \'' . addcslashes($database, '\'\\') . '\'', $db_file);
+        $db_file = str_replace("'hostname' => '',", "'hostname' => '" . addcslashes($hostname, '\'\\') . "',", $db_file);
+        $db_file = str_replace("'username' => '',", "'username' => '" . addcslashes($username, '\'\\') . "',", $db_file);
+        $db_file = str_replace("'password' => '',", "'password' => '" . addcslashes($password, '\'\\') . "',", $db_file);
+        $db_file = str_replace("'database' => '',", "'database' => '" . addcslashes($database, '\'\\') . "',", $db_file);
 
         write_file(APPPATH . 'config/database.php', $db_file);
     }
-- 
2.11.1

